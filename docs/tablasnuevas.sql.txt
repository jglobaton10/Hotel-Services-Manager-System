
--------- CONVENCIONES -----------------------
CREATE TABLE H_SERVICIOS_CONVENCIONES ( ID NUMBER, TEMATICA VARCHAR(20),
PRECIO NUMBER NOT NULL, NUMERO_PERSONAS NUMBER NOT NULL, SERVICIOS_CONVENCION NUMBER NOT NULL,

PRIMARY KEY (ID),
FROREIGN KEY SERVICIOS_CONVENCION REFERENCES  H_SERVICIOS_CONVENCIONES (ID) );

ALTER TABLE H_CONVENCIONES 
ADD (ESTADO NUMBER NOT NULL);

ALTER TABLE H_CONVENCIONES  
MODIFY (TEMATICA NOT NULL);

ALTER TABLE H_CONVENCIONES  
MODIFY (PRECIO NOT NULL);

ALTER TABLE H_CONVENCIONES  
MODIFY (NUMERO_PERSONAS NOT NULL);

ALTER TABLE H_CONVENCIONES  
MODIFY (SERVICIOS_CONVENCION NOT NULL);

ALTER TABLE H_CONVENCIONES
ADD CONSTRAINT H_CONVENCIONES_CHK1 CHECK 
(estado = 1 or estado = 0)
ENABLE;


CREATE TABLE H_SERVICIOS_CONVENCIONES ( ID NUMBER, RESERVADOS_CONVENCION VARCHAR(20) NOT NULL, ID_CONVENCION VARCHAR(20) NOT NULL,

PRIMARY KEY (ID), FOREIGN KEY  ID_CONVENCION REFERENCES H_SERVICIOS_CONVENCIONES(ID));


CREATE TABLE ASISTENTES_CONVENCION (ID_CLIENTE VARCHAR(20),
ID_CONVENCION VARCHAR(20) NOT NULL, 
PRIMARY KEY (ID_CLIENTE),
FOREIGN KEY (ID_CLIENTE)REFERENCES H_CLIENTES(ID),
FOREIGN KEY (ID_CONVENCION) REFERENCES H_CONVENCIONES(ID));




------------------- SALONES -----------------------------
CREATE TABLE H_SALONES ( ID NUMBER, TIPO NUMBER CHECK (TIPO > 0 ), CAPACIDAD NUMBER NOT NULL, MOBILIARIO VARCHAR(20) NOT NULL,RESERVADO NUMBER NOT NULL,

PRIMARY KEY (ID)
);

ALTER TABLE H_SALONES ADD CHECK (CAPACIDAD>0);
ALTER TABLE H_SALONES ADD CHECK (TIPO = 1 OR TIPO = 2);


CREATE TABLE H_RESERVAS_SALONES (ID VARCHAR(20), ID_SALON VARCHAR(20) NOT NULL,FECHA VARCHAR(20) NOT NULL,
PRIMARY KEY (ID), FOREIGN KEY (ID_SALON) REFERENCES H_SALONES(ID))

---------------------MANTENIMIENTO------------------------

CREATE TABLE H_ESTAN_MANTENIMIENTO (ID VARCHAR(20), ESTADO VARCHAR(20) NOT NULL, PRIMARY KEY(ID)
FOREIGN KEY (ID) REFERENCES H_PRESENTAN_FALLOS(ID))

CREATE TABLE H_PRESENTAN_FALLOS (ID VARCHAR(20), DESCRIPCION VARCHAR(20) NOT NULL, PRIMARY KEY(ID)
FOREIGN KEY (ID) REFERENCES H_HABITACIONES(ID))

----------------------------PRESTAMO DE UTENCILIOS-------------------

CREATE TABLE H_PRESTAMO_UTENCILIOS( ID VARCHAR(20), PRECIO NUMBER NOT NULL, ESTADO 
VARCHAR(20) NOT NULL CHECK (ESTADO = 1 OR ESTADO = 2), PRESTADO NUMBER CHECK (PRESTADO = 0 OR PRESTADO = 1) NOT NULL
PRIMARY KEY(ID))

------------------------SERVICIO  DE LIMPENZA----------------------

CREATE TABLE H_SERVICIOS_LIMPIEZA( ID VARCHAR(20), PRECIO NUMBER NOT NULL, PRIMARY KEY (ID))

CREATE TABLE H_LIMPIEZA( ID VARCHAR(20), ID_SERVICIO VARCHAR(20) NOT NULL, PRECIO NUMBER NOT NULL, PRIMARY KEY (ID),
FOREIGN KEY (ID_SERVICIO) REFERENCES H_SERVICIOS_LIMPIEZA(ID))

ALTER TABLE H_SERVICIOS_LIMPIEZA
ADD CONSTRAINT H_SERVICIOS_LIMPIEZA_CHK1 CHECK 
(ID = 1 OR ID = 2 OR ID = 3)
ENABLE;


----------------------------Otros--------------------------------
ALTER TABLE H_CLIENTES 
ADD (ESTADO NUMBER NOT NULL);

ALTER TABLE H_CLIENTES
ADD CONSTRAINT H_CLIENTES_CHK1 CHECK 
(estado = 0 or estado = 1
)
ENABLE;
